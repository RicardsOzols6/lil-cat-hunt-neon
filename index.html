<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lil Cat Hunt üêæ</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap');

    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Fredoka One', cursive; }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top left, #2a003f, #120014);
      color: #fff;
      overflow-x: hidden;
    }

    /* glassy containers */
    .card {
      background: rgba(255,255,255,0.05);
      border-radius: 16px;
      padding: 16px;
      margin: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.4);
      backdrop-filter: blur(8px);
    }

    h1, h2 { margin-bottom: 8px; }

    button {
      background: linear-gradient(135deg, #ff69b4, #9b30ff);
      border: none;
      padding: 10px 18px;
      border-radius: 12px;
      cursor: pointer;
      color: white;
      font-size: 16px;
      transition: transform 0.1s;
    }
    button:active { transform: scale(0.95); }

    /* emoji field FIXED */
    .emoji-field{
      position: fixed;
      inset: -25vh -10vw -25vh -10vw;
      width: auto; height: auto;
      overflow: visible;
      pointer-events: none;
      z-index: 0;
      transform: translateZ(0);
      will-change: transform;
    }
    .drift{
      position:absolute;
      font-size:24px;
      opacity:.9;
      animation: drift var(--dur) linear forwards;
      filter: drop-shadow(0 3px 6px rgba(0,0,0,.35));
    }
    @keyframes drift{
      0%   { transform: translate(var(--x,0), 120vh) rotate(0deg) scale(.9); opacity:0 }
      8%   { opacity:.95 }
      100% { transform: translate(calc(var(--x,0) + var(--dx,0)), -25vh) rotate(540deg) scale(1.25); opacity:0 }
    }

    /* music controls section */
    .music-controls {
      margin: 16px;
      padding: 12px;
      border-radius: 12px;
      background: rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }
    .music-controls button {
      flex-shrink: 0;
    }
    .music-controls input[type=range] {
      flex-grow: 1;
    }
  </style>
</head>
<body>

  <div class="emoji-field" id="field"></div>

  <div class="card">
    <h1>üêæ Lil Cat Hunt üêæ <span id="counter">(0/0)</span></h1>
    <p>Shared scoreboard. Names stay üôà hidden until you find them.</p>
  </div>

  <div class="card">
    <h2>Found a Cat</h2>
    <select id="colorSel">
      <option>Black</option><option>White</option><option>Orange</option>
    </select>
    <select id="locSel">
      <option>Kitchen</option><option>Bedroom</option><option>Garden</option>
    </select>
    <button onclick="guessCat()">Count it üêæ</button>
  </div>

  <div class="card" id="adminPanel" style="display:none;">
    <h2>Add Cat <span style="background:#090;color:#fff;padding:2px 6px;border-radius:6px;">Admin</span></h2>
    <select id="aColorSel">
      <option>Black</option><option>White</option><option>Orange</option>
    </select>
    <select id="aLocSel">
      <option>Kitchen</option><option>Bedroom</option><option>Garden</option>
    </select>
    <input id="catName" placeholder="Name (Emyl sees this)"/>
    <button onclick="addCat()">Add</button>
    <p>Total goes up when you add cats.</p>
  </div>

  <div class="card">
    <h2>Activity</h2>
    <div id="activity">No adventures yet.</div>
    <button onclick="clearActivity()">Clear activity</button>
  </div>

  <div class="card">
    <h2>Cat List</h2>
    <div id="catList">No cats yet.</div>
  </div>

  <div class="music-controls">
    <button onclick="toggleMusic()">‚ñ∂Ô∏è Track 1</button>
    <label>Vol <input type="range" id="volControl" min="0" max="1" step="0.01"></label>
  </div>

<script>
  let cats = [];
  let activity = [];
  let found = [];
  let admin = window.location.search.includes("admin=emyl-loves-cats");

  // === emoji floaters ===
  const field = document.getElementById("field");
  const floaters = ["üê±","üêæ","üò∫","‚ú®","üß∂","üí´","ü™Ñ"];
  function spawnFloater(){
    const e = document.createElement("div");
    e.className = "drift";
    e.textContent = floaters[Math.floor(Math.random()*floaters.length)];
    const x  = Math.random()*window.innerWidth;
    const dx = (Math.random()*2-1)*220;
    const dur= 8 + Math.random()*8;
    e.style.setProperty("--x",  x+"px");
    e.style.setProperty("--dx", dx+"px");
    e.style.setProperty("--dur",dur+"s");
    e.style.left="0"; e.style.top="0";
    field.appendChild(e);
    setTimeout(()=>e.remove(), dur*1000+250);
  }
  for(let i=0;i<24;i++) spawnFloater();
  setInterval(spawnFloater, 450);

  // === sound fx ===
  function beep(){ new Audio("https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg").play(); }
  function boop(){ new Audio("https://actions.google.com/sounds/v1/cartoon/pop.ogg").play(); }

  // === music ===
  const tracks = [
    "https://files.catbox.moe/1.mp3",
    "https://files.catbox.moe/2.mp3",
    "https://files.catbox.moe/3.mp3",
    "https://files.catbox.moe/4.mp3"
  ];
  let trackIndex=0;
  let music=new Audio(tracks[0]); music.loop=true;
  document.getElementById("volControl").addEventListener("input",e=>{music.volume=e.target.value;});
  function toggleMusic(){
    if(music.paused){ music.play(); }
    else { music.pause(); trackIndex=(trackIndex+1)%tracks.length; music=new Audio(tracks[trackIndex]); music.loop=true; music.play(); }
    document.querySelector(".music-controls button").textContent=`üéµ Track ${trackIndex+1}`;
  }

  // === cats ===
  function updateCounter(){
    document.getElementById("counter").textContent=`${found.length}/${cats.length}`;
  }
  function renderCats(){
    let c = document.getElementById("catList");
    if(!cats.length){ c.innerHTML="No cats yet."; return;}
    c.innerHTML="";
    cats.forEach(cat=>{
      let li=document.createElement("div");
      if(found.includes(cat)){
        li.textContent=`${cat.name} ¬∑ ${cat.color} ¬∑ ${cat.location}`;
      } else {
        li.textContent=`üôà Hidden ¬∑ ${cat.color} ¬∑ ${cat.location}`;
      }
      c.appendChild(li);
    });
  }
  function renderActivity(){
    let a=document.getElementById("activity");
    if(!activity.length){a.innerHTML="No adventures yet.";return;}
    a.innerHTML="";
    activity.slice(-4).forEach(x=>{
      let d=document.createElement("div");
      d.textContent=x;
      a.appendChild(d);
    });
  }
  function addCat(){
    let color=document.getElementById("aColorSel").value;
    let loc=document.getElementById("aLocSel").value;
    let name=document.getElementById("catName").value||"Unnamed";
    let cat={color,location:loc,name};
    cats.push(cat);
    activity.push(`+ Hidden (${color},${loc})`);
    updateCounter(); renderCats(); renderActivity();
    alert("‚ú® EMYL HAS ADDED A NEW CAT ‚ú®");
    beep();
  }
  function guessCat(){
    let color=document.getElementById("colorSel").value;
    let loc=document.getElementById("locSel").value;
    let cat=cats.find(c=>c.color===color && c.location===loc);
    if(cat && !found.includes(cat)){
      found.push(cat);
      activity.push(`‚úîÔ∏è ${cat.name} (${color},${loc})`);
      boop();
    } else {
      activity.push(`‚ùå Nothing (${color},${loc})`);
      beep();
    }
    updateCounter(); renderCats(); renderActivity();
  }
  function clearActivity(){ activity=[]; renderActivity(); beep(); }

  if(admin){ document.getElementById("adminPanel").style.display="block"; }

  updateCounter(); renderCats(); renderActivity();
</script>

</body>
</html>
